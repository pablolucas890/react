{"ast":null,"code":"var _jsxFileName = \"/home/pablo/Documentos/GITHUB/REACTJS/projetos/desafio-3-conceitos-reactjs/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./styles.css\";\nimport conn from './services/api';\n\nfunction App() {\n  const [repositories, setRepositories] = useState([]);\n  useEffect(() => {\n    conn.get('/repositories').then(response => {\n      setRepositories(response.data);\n      console.log(response.data);\n    });\n  }, []);\n\n  async function handleAddRepository() {\n    const response = await conn.post('/repositories', {\n      title: \"Projeto-XXX\" + Date.now(),\n      url: \"https://github.com/pablolucas890/\",\n      techs: [\"Node.js\", \"React\"]\n    });\n    const repository = response.data;\n    setRepositories([...repositories, repository]);\n  }\n\n  async function handleRemoveRepository(id) {\n    const response = await conn.delete('/repositories/' + id);\n\n    if (response.status == 204) {\n      console.log('antigo repositories');\n      console.log(repositories);\n      const Index = repositories.findIndex(repository => repository.id == id);\n\n      if (Index < 0) {\n        //n encontrou\n        return response.status(400).json({\n          error: \"Repository Not Found\"\n        });\n      }\n\n      repositories.splice(Index, 1);\n      console.log('novo repositories');\n      console.log(repositories);\n      setRepositories([...repositories]);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    \"data-testid\": \"repository-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, repositories.map(repository => /*#__PURE__*/React.createElement(\"div\", {\n    key: repository.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }, repository.title), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleRemoveRepository(repository.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }, \"Remover\"))))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleAddRepository,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, \"Adicionar\"));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/pablo/Documentos/GITHUB/REACTJS/projetos/desafio-3-conceitos-reactjs/src/App.js"],"names":["React","useState","useEffect","conn","App","repositories","setRepositories","get","then","response","data","console","log","handleAddRepository","post","title","Date","now","url","techs","repository","handleRemoveRepository","id","delete","status","Index","findIndex","json","error","splice","map"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AAEA,OAAO,cAAP;AAEA,OAAOC,IAAP,MAAiB,gBAAjB;;AAEA,SAASC,GAAT,GAAe;AAEb,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCL,QAAQ,CAAC,EAAD,CAAhD;AAEAC,EAAAA,SAAS,CAAC,MAAK;AACbC,IAAAA,IAAI,CAACI,GAAL,CAAS,eAAT,EAA0BC,IAA1B,CAA+BC,QAAQ,IAAI;AACzCH,MAAAA,eAAe,CAACG,QAAQ,CAACC,IAAV,CAAf;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACC,IAArB;AACD,KAHD;AAID,GALQ,EAMT,EANS,CAAT;;AAQA,iBAAeG,mBAAf,GAAqC;AACnC,UAAMJ,QAAQ,GAAG,MAAMN,IAAI,CAACW,IAAL,CAAU,eAAV,EACvB;AACEC,MAAAA,KAAK,EAAG,gBAAcC,IAAI,CAACC,GAAL,EADxB;AAEEC,MAAAA,GAAG,EAAG,mCAFR;AAGEC,MAAAA,KAAK,EAAG,CACN,SADM,EAEN,OAFM;AAHV,KADuB,CAAvB;AAUA,UAAMC,UAAU,GAAGX,QAAQ,CAACC,IAA5B;AACAJ,IAAAA,eAAe,CAAC,CAAC,GAAGD,YAAJ,EAAkBe,UAAlB,CAAD,CAAf;AACD;;AAED,iBAAeC,sBAAf,CAAsCC,EAAtC,EAA0C;AAExC,UAAMb,QAAQ,GAAG,MAAMN,IAAI,CAACoB,MAAL,CAAY,mBAAiBD,EAA7B,CAAvB;;AACA,QAAGb,QAAQ,CAACe,MAAT,IAAmB,GAAtB,EAA0B;AACxBb,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYP,YAAZ;AACA,YAAMoB,KAAK,GAAGpB,YAAY,CAACqB,SAAb,CAAuBN,UAAU,IAAIA,UAAU,CAACE,EAAX,IAAiBA,EAAtD,CAAd;;AACA,UAAGG,KAAK,GAAG,CAAX,EAAa;AACX;AACF,eAAOhB,QAAQ,CAACe,MAAT,CAAgB,GAAhB,EAAqBG,IAArB,CAA0B;AAACC,UAAAA,KAAK,EAAG;AAAT,SAA1B,CAAP;AACC;;AACDvB,MAAAA,YAAY,CAACwB,MAAb,CAAoBJ,KAApB,EAA2B,CAA3B;AACAd,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYP,YAAZ;AACAC,MAAAA,eAAe,CAAC,CAAC,GAAGD,YAAJ,CAAD,CAAf;AACD;AACF;;AAED,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,mBAAY,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGEA,YAAY,CAACyB,GAAb,CAAiBV,UAAU,iBACzB;AAAK,IAAA,GAAG,EAAEA,UAAU,CAACE,EAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGF,UAAU,CAACL,KADd,CADF,eAIE;AAAQ,IAAA,OAAO,EAAE,MAAMM,sBAAsB,CAACD,UAAU,CAACE,EAAZ,CAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJF,CADF,CAHF,CADF,CADF,eAkBE;AAAQ,IAAA,OAAO,EAAET,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAlBF,CADF;AAsBD;;AAED,eAAeT,GAAf","sourcesContent":["import React, {useState, useEffect} from \"react\";\n\nimport \"./styles.css\";\n\nimport conn from './services/api';\n\nfunction App() {\n\n  const [repositories, setRepositories] = useState([]);\n\n  useEffect(() =>{\n    conn.get('/repositories').then(response => {\n      setRepositories(response.data);\n      console.log(response.data)\n    })\n  },\n  []\n  )\n  async function handleAddRepository() {\n    const response = await conn.post('/repositories',\n    {\n      title : \"Projeto-XXX\"+Date.now(),\n      url : \"https://github.com/pablolucas890/\",\n      techs : [\n        \"Node.js\",\n        \"React\"\n      ]\n    }\n    )\n    const repository = response.data\n    setRepositories([...repositories, repository]);\n  }\n\n  async function handleRemoveRepository(id) {\n  \n    const response = await conn.delete('/repositories/'+id);\n    if(response.status == 204){\n      console.log('antigo repositories')\n      console.log(repositories)\n      const Index = repositories.findIndex(repository => repository.id == id);\n      if(Index < 0){\n        //n encontrou\n      return response.status(400).json({error : \"Repository Not Found\"})\n      }\n      repositories.splice(Index, 1);\n      console.log('novo repositories')\n      console.log(repositories)\n      setRepositories([...repositories]);\n    }\n  }\n\n  return (\n    <div>\n      <ul data-testid=\"repository-list\">\n        <li>\n          \n          {\n          repositories.map(repository => \n            <div key={repository.id}>\n              <li >\n                {repository.title}\n              </li>\n              <button onClick={() => handleRemoveRepository(repository.id)}>\n                Remover\n              </button>\n            </div>\n          )\n          }\n        </li>\n      </ul>\n      <button onClick={handleAddRepository}>Adicionar</button>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}